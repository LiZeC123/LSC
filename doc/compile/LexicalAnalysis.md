
词法分析
--------------

#### 词法记号的分类
按照类型含义可以分成如下的几种
1. 类型系统
	- `int` `char` `void` `double`
	- 一维指针,一维数组 包括 `*` `&` `[` 和 `]`
2. 常量
	- 二/八/十进制整数
	- 字符常量
	- 字符串常量
3. 表达式
	- 算数运算符 `+` `-` `*` `/` `%` `++` `--`
	- 关系运算符 `>` `<` `==` `>=` `<=` `!=`
	- 逻辑运算符 `&&` `||` `!`
4. 语句
	- 赋值语句
	- 循环语句 for,while, do-while
	- 条件语句 if-else switch-case
	- 函数调用
	- 控制语句 return  break continue
5. 定义和声明
	- extern语句
	- 函数声明
	- 函数定义
	- 变量声明
6. 其他
	- 单行注释
	- 多行注释

具体到编写的程序中,可以分成如下的几类
1. 关键字/标识符
	- 这两个都是按照某种规则定义的字符串,其中某些特殊的字符串会视为关键字
2. 数字
	- 包括常见的10进制,16进制,8进制和2进制数字
	- 后续还会添加浮点数的支持
3. 字符常量
	- 通常的字符常量处理较为简单,主要是对转移字符的判别
4. 字符串常量
	- 字符串常量也包括转移字符的处理
5. 注释
	- 包括单行注释和多行注释
	- 对于多行注释的识别略微需要一些技巧,但本质上还是有限自动机
6. 空白符号
	- 对于去除所有的空白字符,也可以设计一个一个对应的有限自动机
7. 其他简单符号
	- 包括各种的界符和运算符,基本上都是一个或者两个符号,只需要简单匹配即可完成识别

 
#### 正则表达式
词法分析可以使用有限自动机完成,而有限自动机又对应正则语言,因此只要得到各个成分的正则表达式,就可以完成词法分析
1. 标识符 `[_a-zA-Z][_a-zA-Z0-9]*`
2. 常量
	1. 十进制整数 `[1-9][0-9]*`
	2. 八进制整数 `0[1-7]*`
	3. 二进制整数 `0b[0-1]+`
	4. 十六进制整数 `0x[0-9a-fA-F]+`
	5. 浮点数 `[1-9][0-9]*[.][0-9]+`
3. 界符
	- 界符有两类,单符号界符和双符号界符,注意区分公共前缀即可,例如对于`>`和`>=`,读入`>`需要确定之后的符号不是`=`才能结束
4. 注释
	- 单行注释
	- 多行注释 `/\*.*\*/` 
	- 注意:多行注释对应一个NFA,如何将其转化为等价的DFA作为该知识点的课后作业留给同学们练习~

注意:单独的0视为8进制数,而单独的0b或者0x不视为一个合法的符号

#### 词法分析部分的错误处理
主要的错误包括如下的几类
1. 需要成对出现的符号尾成对出现
	- 包括字符串,字符常量的符号
2. 数字识别中出现错误
	- 例如不合法的二进制或16进制数字
3. 无法识别的符号
4. 没有结束的注释符号

对于这些错误,目前处理方案是仅仅报告错误的位置,然后继续进行词法分析
